<div class="email-checker-container">
  <h6>Duplicate Check</h6>
  <form [formGroup]="emailForm" (ngSubmit)="checkEmail()">
    <mat-form-field class="search-bar" appearance="fill">
      <mat-label>Email Address</mat-label>
      <input matInput formControlName="email" placeholder="Enter email" />
      <mat-error *ngIf="emailForm.get('email')?.hasError('required')">
        Email is required.
      </mat-error>
      <mat-error *ngIf="emailForm.get('email')?.hasError('email')">
        Please enter a valid email.
      </mat-error>
    </mat-form-field>
    
    <button mat-raised-button type="submit" [disabled]="emailForm.invalid">
      Search
    </button>
  </form>

  <div *ngIf="emailStatus" class="status-message">
    <p>{{ emailStatus }}</p>
  </div>

  <!-- Material Table to display results when an email is found -->
  <div *ngIf="emailData.length > 0" class="email-data-table">
    <table mat-table [dataSource]="emailData">
      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.name }}</td>
      </ng-container>

      <!-- Client Role Column -->
      <ng-container matColumnDef="client">
        <th mat-header-cell *matHeaderCellDef>Client </th>
        <td mat-cell *matCellDef="let element">{{ element.client }}</td>
      </ng-container>

      <ng-container matColumnDef="role">
        <th mat-header-cell *matHeaderCellDef>Role </th>
        <td mat-cell *matCellDef="let element">{{ element.role }}</td>
      </ng-container>

      <!-- Submission Date Column -->
      <ng-container matColumnDef="submissionDate">
        <th mat-header-cell *matHeaderCellDef>Submission Date</th>
        <td mat-cell *matCellDef="let element">{{ element.submissionDate | date: 'short' }}</td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let element">{{ element.status }}</td>
      </ng-container>

      <!-- Table Header and Row Definitions -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
